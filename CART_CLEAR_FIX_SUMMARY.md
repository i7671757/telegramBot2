# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—á–∏—Å—Ç–∫–æ–π –∫–æ—Ä–∑–∏–Ω—ã

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–Ω–æ–ø–∫–∞ "üóë Savatni tozalash" –Ω–µ –æ—á–∏—â–∞–ª–∞ –∫–æ—Ä–∑–∏–Ω—É –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤ –ø–æ—Ä—è–¥–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫.

## –ü—Ä–∏—á–∏–Ω–∞
–í —Å—Ü–µ–Ω–∞—Ö `products` –∏ `categories` –∫–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞—Å—å —Ä–∞–Ω—å—à–µ –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã, –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ `messageText.includes('Cart')` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–Ω–æ–ø–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–µ–∫—Å—Ç–æ–º "Clear Cart".

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫
- **–î–æ**: –°–Ω–∞—á–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã, –ø–æ—Ç–æ–º –æ—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
- **–ü–æ—Å–ª–µ**: –°–Ω–∞—á–∞–ª–∞ –æ—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã, –ø–æ—Ç–æ–º –∫–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã

### 2. –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —ç–º–æ–¥–∑–∏ `üóë` –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –£–±—Ä–∞–Ω–∞ –æ–±—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "Clear" —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### 3. –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:
- `src/scenes/products.scene.ts`
- `src/scenes/categories.scene.ts` 
- `src/scenes/newOrder.scene.ts`

### 4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### –í products.scene.ts –∏ categories.scene.ts:
```typescript
// –ë–´–õ–û:
// Handle cart button
if (messageText.includes('Cart')) { ... }

// Handle clear cart  
if (messageText.includes('Clear')) { ... }

// –°–¢–ê–õ–û:
// Handle clear cart FIRST (before cart button to avoid conflicts)
if (messageText === ctx.i18n.t('cart.clear') || 
    messageText.includes('üóë') ||
    messageText.includes('–û—á–∏—Å—Ç–∏—Ç—å') ||
    messageText.includes('Tozalash')) { ... }

// Handle cart button (after clear cart to avoid conflicts)
if (messageText.includes('Cart')) { ... }
```

#### –í newOrder.scene.ts:
```typescript
// –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ 'Clear' —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
if (messageText === ctx.i18n.t('cart.clear') || 
    messageText.includes('üóë') || 
    messageText.includes('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É') ||
    messageText.includes('Tozalash')) { ... }
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
–¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∞ "üóë Savatni tozalash" –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—á–∏—â–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ö:
- ‚úÖ products.scene.ts
- ‚úÖ categories.scene.ts  
- ‚úÖ newOrder.scene.ts

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–°–æ–∑–¥–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω —Ç–µ—Å—Ç `test_cart_clear_fix.cjs`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ 